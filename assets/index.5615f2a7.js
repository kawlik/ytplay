var q=Object.defineProperty,M=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var A=(e,n,r)=>n in e?q(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,I=(e,n)=>{for(var r in n||(n={}))z.call(n,r)&&A(e,r,n[r]);if(R)for(var r of R(n))E.call(n,r)&&A(e,r,n[r]);return e},$=(e,n)=>M(e,j(n));import{r as d,j as t,F as v,a as c,d as W,b as F,c as J,e as O,f as U,g as D,h as V,i as B,R as G,k as H}from"./vendor.b2029db4.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}};K();const b=d.exports.createContext(null);function Y({children:e}){const[n,r]=d.exports.useReducer(Q,{next:[],prev:[]}),l={state:n,dispatchState:r};return d.exports.useEffect(()=>{const a=JSON.parse(localStorage.getItem("ytplay.next")||null),i=JSON.parse(localStorage.getItem("ytplay.prev")||null),o={next:(a==null?void 0:a.length)?a:[],prev:(i==null?void 0:i.length)?i:[]};r({type:"read",payload:o})},[]),d.exports.useEffect(()=>{n.next.length&&localStorage.setItem("ytplay.next",JSON.stringify(n.next)),n.prev.length&&localStorage.setItem("ytplay.prev",JSON.stringify(n.prev))}),t(v,{children:t(b.Provider,{value:l,children:e})})}function Q(e,n){switch(n.type){case"add":return $(I({},e),{next:[...e.next.filter(r=>r.id!==n.payload.id),n.payload]});case"play-next":return{next:e.next.slice(1),prev:e.next[0]?[e.next[0],...e.prev]:e.prev};case"play-prev":return{next:e.prev[0]?[e.prev[0],...e.next]:e.next,prev:e.prev.slice(1)};case"read":return{next:n.payload.next,prev:n.payload.prev};case"next-to-prev":return{next:e.next.filter(r=>r.id!==n.payload.id),prev:[...e.prev,n.payload]};case"prev-to-next":return{next:[...e.next,n.payload],prev:e.prev.filter(r=>r.id!==n.payload.id)}}}var S={google:{base:"https://youtube.googleapis.com/youtube/v3/search?key=AIzaSyCIlq-5vydLWLcPGzI4H3sGWm3YA3rCheI&part=snippet&type=video&",string:"maxResults=5&q=",related:"maxResults=1&relatedToVideoId="},ytmp3:{base:"https://youtube-mp36.p.rapidapi.com/dl?id=",headers:{"x-rapidapi-key":"1b0dbbddf1mshd3b40f307c84bb8p1ce739jsnd4c8e2a3e284","x-rapidapi-host":"youtube-mp36.p.rapidapi.com"}},PWA:{name:"yt play",short_name:"yt play",theme_color:"#ffffff",background_color:"#ffffff",display:"standalone",orientation:"portrait",icons:[{src:"/android-chrome-192x192.png",sizes:"192x192",type:"image/png"},{src:"/android-chrome-512x512.png",sizes:"512x512",type:"image/png"}]}};function T({song:e,action:n,onPlaylistNext:r}){return t(v,{children:c("li",{className:"on-playlist",children:[t("img",{className:"img",src:e.img,alt:e.author}),c("div",{className:"info",children:[t("p",{children:t("span",{className:"title",children:e.title})}),t("p",{children:t("span",{className:"author",children:e.author})})]}),t("button",{className:"action",onClick:()=>n(e),children:r?t(W,{}):t(F,{})})]})})}function X({raw:e,action:n,delay:r}){var i,o,m,u,h;const l={id:e.id.videoId,src:null,img:decodeURIComponent((m=(o=(i=e==null?void 0:e.snippet)==null?void 0:i.thumbnails)==null?void 0:o.high)==null?void 0:m.url),title:_((u=e==null?void 0:e.snippet)==null?void 0:u.title),author:_((h=e==null?void 0:e.snippet)==null?void 0:h.channelTitle)};async function a(N){var f;try{const x=new URL(S.ytmp3.base+l.id),y=await O.get(x,{headers:S.ytmp3.headers}),p=((f=y==null?void 0:y.data)==null?void 0:f.link)?y.data.link:null;p&&(l.src=p,n(l))}catch(x){console.error(x)}}return t(v,{children:c("li",{className:"search-result",style:{animationDelay:`${.1*r}s`,animationPlayState:"runing"},children:[t("img",{className:"img",src:l.img,alt:l.author}),c("div",{className:"info",children:[t("p",{children:t("span",{className:"title",children:l.title})}),t("p",{children:t("span",{className:"author",children:l.author})})]}),t("button",{className:"action",onClick:()=>a(l.id),children:t(J,{})})]})})}function _(e){return decodeURIComponent(e==null?void 0:e.replace(/\&[\S]{0,8}\:/g,""))}function Z(){const{state:e,dispatchState:n}=d.exports.useContext(b),[r,l]=d.exports.useState(!1),[a,i]=d.exports.useState([]),[o,m]=d.exports.useState(""),u=d.exports.useRef();function h(s){clearTimeout(u.current);const{value:g}=s.target;m(g),u.current=setTimeout(()=>N(g),1e3)}async function N(s){var g;if(!(s.length<4))try{const k=new URL(S.google.base+S.google.string+s),C=await O.get(k),P=(g=C==null?void 0:C.data)==null?void 0:g.items;i(P.length?P:[])}catch(k){console.error(k)}}function f(){i([]),m("")}function x(s){n({type:"add",payload:s}),f()}function y(s){n({type:"next-to-prev",payload:s}),f()}function p(s){n({type:"prev-to-next",payload:s}),f()}return t(v,{children:c("section",{className:`search ${r?"expand":""}`,children:[c("div",{id:"yt-search",children:[t("button",{className:r?"expand":"",onClick:()=>l(!1)}),t("input",{className:r?"expand":"",value:o,type:"text",onFocus:()=>l(!0),onChange:h})]}),c("article",{className:`hidden ${r?"display":""}`,children:[c("ul",{className:`search-result ${a.length?"":"hide"}`,children:[t("h3",{children:"Wyniki"}),a.map((s,g)=>t(X,{raw:s,delay:g,action:x},s.etag))]}),c("ul",{className:"playlist next",children:[t("h3",{children:"W kolejce"}),e.next.map(s=>t(T,{song:s,action:y,onPlaylistNext:!0},s.id))]}),c("ul",{className:"playlist prev",children:[t("h3",{children:"Wcze\u015Bniejsze"}),e.prev.map(s=>t(T,{song:s,action:p,onPlaylistNext:!1},s.id))]})]})]})})}function w(){const{state:e,dispatchState:n}=d.exports.useContext(b);return t(v,{children:t("section",{className:"view",style:{backgroundImage:`url( ${e.next[0]?e.next[0].img:""}`},children:t("div",{className:"backdrop"})})})}function ee(){const{state:e,dispatchState:n}=d.exports.useContext(b),[r,l]=d.exports.useState(new Audio),[a,i]=d.exports.useState(!0);function o(p){r.setAttribute("src",p),r.load()}function m(){r.removeAttribute("src"),r.load()}function u(){i(!1),r.play()}function h(){i(!0),r.pause()}function N(){if(!r.src)if(e.next[0])o(e.next[0].src);else return;r.paused?u():h()}function f(){e.next[0]&&(o(e.next[0].src),u())}function x(){h(),m(),e.next[1]&&(o(e.next[1].src),i(!1),u()),n({type:"play-next"})}function y(){h(),m(),e.prev[0]&&(o(e.prev[0].src),i(!1),u()),n({type:"play-prev"})}return d.exports.useEffect(()=>{function p(){document.querySelector("#input-timing .track").max=r.duration,document.querySelector("#input-timing .track").value=r.currentTime,document.querySelector("#input-timing .t-now").textContent=L(r.currentTime),document.querySelector("#input-timing .t-end").textContent=L(r.duration),requestAnimationFrame(p)}p()}),t(v,{children:c("section",{className:"play",children:[c("div",{className:"row info",children:[t("p",{id:"animated-song-title",children:t("span",{className:"title",children:e.next[0]?e.next[0].title:""})}),t("p",{children:t("span",{className:"author",children:e.next[0]?e.next[0].author:""})})]}),c("div",{className:"row timing",id:"input-timing",children:[t("input",{className:"track",type:"range",min:0,max:0}),t("span",{className:"t-now",children:"0:00"}),t("span",{className:"t-end",children:"0:00"})]}),c("div",{className:"row actions",children:[t("button",{className:"skip-prev",onClick:f,onDoubleClick:y,children:t(U,{})}),t("button",{className:"play-pause",onClick:N,children:r.paused?t(D,{}):t(V,{})}),t("button",{className:"skip-next",onClick:x,children:t(B,{})})]})]})})}function L(e){return Number.isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.ceil(e)%60>9?Math.ceil(e)%60:"0"+Math.ceil(e)%60}`}function te(){return t(v,{children:c(Y,{children:[t(Z,{}),t(w,{}),t(ee,{})]})})}G.render(t(H.StrictMode,{children:t(te,{})}),document.getElementById("root"));
