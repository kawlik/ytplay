var q=Object.defineProperty,M=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var A=(e,r,n)=>r in e?q(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,I=(e,r)=>{for(var n in r||(r={}))z.call(r,n)&&A(e,n,r[n]);if(R)for(var n of R(r))E.call(r,n)&&A(e,n,r[n]);return e},$=(e,r)=>M(e,j(r));import{r as d,j as t,F as v,a as c,d as W,b as F,c as J,e as O,f as U,g as D,h as V,i as B,R as G,k as H}from"./vendor.b2029db4.js";const K=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};K();const b=d.exports.createContext(null);function Y({children:e}){const[r,n]=d.exports.useReducer(Q,{next:[],prev:[]}),l={state:r,dispatchState:n};return d.exports.useEffect(()=>{const a=JSON.parse(localStorage.getItem("ytplay.next")||null),i=JSON.parse(localStorage.getItem("ytplay.prev")||null),o={next:(a==null?void 0:a.length)?a:[],prev:(i==null?void 0:i.length)?i:[]};n({type:"read",payload:o})},[]),d.exports.useEffect(()=>{r.next.length&&localStorage.setItem("ytplay.next",JSON.stringify(r.next)),r.prev.length&&localStorage.setItem("ytplay.prev",JSON.stringify(r.prev))}),t(v,{children:t(b.Provider,{value:l,children:e})})}function Q(e,r){switch(r.type){case"add":return $(I({},e),{next:[...e.next.filter(n=>n.id!==r.payload.id),r.payload]});case"play-next":return{next:e.next.slice(1),prev:e.next[0]?[e.next[0],...e.prev]:e.prev};case"play-prev":return{next:e.prev[0]?[e.prev[0],...e.next]:e.next,prev:e.prev.slice(1)};case"read":return{next:r.payload.next,prev:r.payload.prev};case"next-to-prev":return{next:e.next.filter(n=>n.id!==r.payload.id),prev:[...e.prev,r.payload]};case"prev-to-next":return{next:[...e.next,r.payload],prev:e.prev.filter(n=>n.id!==r.payload.id)}}}var S={google:{base:"https://youtube.googleapis.com/youtube/v3/search?key=AIzaSyCIlq-5vydLWLcPGzI4H3sGWm3YA3rCheI&part=snippet&type=video&",string:"maxResults=5&q=",related:"maxResults=1&relatedToVideoId="},ytmp3:{base:"https://youtube-mp36.p.rapidapi.com/dl?id=",headers:{"x-rapidapi-key":"1b0dbbddf1mshd3b40f307c84bb8p1ce739jsnd4c8e2a3e284","x-rapidapi-host":"youtube-mp36.p.rapidapi.com"}},PWA:{name:"yt play",short_name:"yt play",theme_color:"#ffffff",background_color:"#ffffff",display:"standalone",orientation:"portrait",icons:[{src:"/android-chrome-192x192.png",sizes:"192x192",type:"image/png"},{src:"/android-chrome-512x512.png",sizes:"512x512",type:"image/png"}]}};function T({song:e,action:r,onPlaylistNext:n}){return t(v,{children:c("li",{className:"on-playlist",children:[t("img",{className:"img",src:e.img,alt:e.author}),c("div",{className:"info",children:[t("p",{children:t("span",{className:"title",children:e.title})}),t("p",{children:t("span",{className:"author",children:e.author})})]}),t("button",{className:"action",onClick:()=>r(e),children:n?t(W,{}):t(F,{})})]})})}function X({raw:e,action:r,delay:n}){var i,o,m,u,h;const l={id:e.id.videoId,src:null,img:decodeURIComponent((m=(o=(i=e==null?void 0:e.snippet)==null?void 0:i.thumbnails)==null?void 0:o.high)==null?void 0:m.url),title:_((u=e==null?void 0:e.snippet)==null?void 0:u.title),author:_((h=e==null?void 0:e.snippet)==null?void 0:h.channelTitle)};async function a(N){var f;try{const y=new URL(S.ytmp3.base+l.id),x=await O.get(y,{headers:S.ytmp3.headers}),p=((f=x==null?void 0:x.data)==null?void 0:f.link)?x.data.link:null;p&&(l.src=p,r(l))}catch(y){console.error(y)}}return t(v,{children:c("li",{className:"search-result",style:{animationDelay:`${.1*n}s`,animationPlayState:"runing"},children:[t("img",{className:"img",src:l.img,alt:l.author}),c("div",{className:"info",children:[t("p",{children:t("span",{className:"title",children:l.title})}),t("p",{children:t("span",{className:"author",children:l.author})})]}),t("button",{className:"action",onClick:()=>a(l.id),children:t(J,{})})]})})}function _(e){return decodeURIComponent(e==null?void 0:e.replace(/\&[\S]{0,8}\:/g,""))}function Z(){const{state:e,dispatchState:r}=d.exports.useContext(b),[n,l]=d.exports.useState(!1),[a,i]=d.exports.useState([]),[o,m]=d.exports.useState(""),u=d.exports.useRef();function h(s){clearTimeout(u.current);const{value:g}=s.target;m(g),u.current=setTimeout(()=>N(g),1e3)}async function N(s){var g;if(!(s.length<4))try{const k=new URL(S.google.base+S.google.string+s),C=await O.get(k),P=(g=C==null?void 0:C.data)==null?void 0:g.items;i(P.length?P:[])}catch(k){console.error(k)}}function f(){i([]),m("")}function y(s){r({type:"add",payload:s}),f()}function x(s){r({type:"next-to-prev",payload:s}),f()}function p(s){r({type:"prev-to-next",payload:s}),f()}return t(v,{children:c("section",{className:`search ${n?"expand":""}`,children:[c("div",{id:"yt-search",children:[t("button",{className:n?"expand":"",onClick:()=>l(!1)}),t("input",{className:n?"expand":"",value:o,type:"text",onFocus:()=>l(!0),onChange:h})]}),c("article",{className:`hidden ${n?"display":""}`,children:[c("ul",{className:`search-result ${a.length?"":"hide"}`,children:[t("h3",{children:"Wyniki"}),a.map((s,g)=>t(X,{raw:s,delay:g,action:y},s.etag))]}),c("ul",{className:"playlist next",children:[t("h3",{children:"W kolejce"}),e.next.map(s=>t(T,{song:s,action:x,onPlaylistNext:!0},s.id))]}),c("ul",{className:"playlist prev",children:[t("h3",{children:"Wcze\u015Bniejsze"}),e.prev.map(s=>t(T,{song:s,action:p,onPlaylistNext:!1},s.id))]})]})]})})}function w(){const{state:e,dispatchState:r}=d.exports.useContext(b);return t(v,{children:t("section",{className:"view",style:{backgroundImage:`url( ${e.next[0]?e.next[0].img:""}`},children:t("div",{className:"backdrop"})})})}function ee(){const{state:e,dispatchState:r}=d.exports.useContext(b),[n,l]=d.exports.useState(new Audio),[a,i]=d.exports.useState(!0);function o(p){n.setAttribute("src",p),n.load()}function m(){n.removeAttribute("src"),n.load()}function u(){i(!1),n.play()}function h(){i(!0),n.pause()}function N(){if(!n.src)if(e.next[0])o(e.next[0].src);else return;n.paused?u():h()}function f(){e.next[0]&&(o(e.next[0].src),u())}function y(){h(),m(),e.next[1]&&(o(e.next[1].src),i(!1),u()),r({type:"play-next"})}function x(){h(),m(),e.prev[0]&&(o(e.prev[0].src),i(!1),u()),r({type:"play-prev"})}return d.exports.useEffect(()=>{function p(){document.querySelector("#input-timing .track").max=n.duration,document.querySelector("#input-timing .track").value=n.currentTime,document.querySelector("#input-timing .t-now").textContent=L(n.currentTime),document.querySelector("#input-timing .t-end").textContent=L(n.duration),requestAnimationFrame(p)}p(),n.onended=()=>y()}),t(v,{children:c("section",{className:"play",children:[c("div",{className:"row info",children:[t("p",{id:"animated-song-title",children:t("span",{className:"title",children:e.next[0]?e.next[0].title:""})}),t("p",{children:t("span",{className:"author",children:e.next[0]?e.next[0].author:""})})]}),c("div",{className:"row timing",id:"input-timing",children:[t("input",{className:"track",type:"range",min:0,max:0}),t("span",{className:"t-now",children:"0:00"}),t("span",{className:"t-end",children:"0:00"})]}),c("div",{className:"row actions",children:[t("button",{className:"skip-prev",onClick:f,onDoubleClick:x,children:t(U,{})}),t("button",{className:"play-pause",onClick:N,children:n.paused?t(D,{}):t(V,{})}),t("button",{className:"skip-next",onClick:y,children:t(B,{})})]})]})})}function L(e){return Number.isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.ceil(e)%60>9?Math.ceil(e)%60:"0"+Math.ceil(e)%60}`}function te(){return t(v,{children:c(Y,{children:[t(Z,{}),t(w,{}),t(ee,{})]})})}G.render(t(H.StrictMode,{children:t(te,{})}),document.getElementById("root"));
