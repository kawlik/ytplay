import{r as d,j as e,F as m,a as i,d as v,b as I,c as M,e as $,f as L,g as _,h as T,i as F,k as W,R as Y,l as J}from"./vendor.69e35d48.js";const D=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function c(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(r){if(r.ep)return;r.ep=!0;const a=c(r);fetch(r.href,a)}};D();var k={google:{base:"https://youtube.googleapis.com/youtube/v3/search?key=AIzaSyCIlq-5vydLWLcPGzI4H3sGWm3YA3rCheI&part=snippet&type=video&",string:"maxResults=5&q=",related:"maxResults=1&relatedToVideoId="},ytmp3:{base:"https://youtube-mp36.p.rapidapi.com/dl?id=",headers:{"x-rapidapi-key":"1b0dbbddf1mshd3b40f307c84bb8p1ce739jsnd4c8e2a3e284","x-rapidapi-host":"youtube-mp36.p.rapidapi.com"}},PWA:{name:"YTPLAY",short_name:"YTPLAY",theme_color:"#ffffff",background_color:"#ffffff",display:"standalone",orientation:"portrait",icons:[{src:"/android-chrome-192x192.png",sizes:"192x192",type:"image/png"},{src:"/android-chrome-512x512.png",sizes:"512x512",type:"image/png"}]}};const C=d.exports.createContext(null);function V({children:t}){const n=d.exports.useRef(new Audio),[c,u]=d.exports.useState(!0),[r,a]=d.exports.useReducer(B,{next:[],prev:[]});function p(){n.current.pause(),u(!0),r.next[0]&&(n.current.src=r.next[0].src,n.current.load(),n.current.play(),u(!1))}function f(){n.current.src?n.current.paused?(n.current.play(),u(!1)):(n.current.pause(),u(!0)):r.next[0]&&(n.current.src=r.next[0].src,n.current.load(),n.current.play(),u(!1))}function h(){n.current.pause(),u(!0),r.next[1]&&(n.current.src=r.next[1].src,n.current.load(),n.current.play(),u(!1)),a({type:"play-next"})}function x(){n.current.pause(),u(!0),r.prev[0]&&(n.current.src=r.prev[0].src,n.current.load(),n.current.play(),u(!1)),a({type:"play-prev"})}function N(s){n.current.pause(),n.current.src=s.src,n.current.load(),n.current.play(),u(!1),a({type:"play-now",payload:s})}function S(s){r.next[0]||(n.current.src=s.src,n.current.load(),n.current.play(),u(!1)),a({type:"add-next",payload:s})}function A(s){r.next[0]||(n.current.src=s.src,n.current.load(),n.current.play(),u(!1)),a({type:"add",payload:s})}function b(s){r.next[0].src===s.src&&(n.current.pause(),u(!0)),a({type:"remove",payload:s})}d.exports.useEffect(()=>{const s=JSON.parse(localStorage.getItem("ytplay.next")),y=JSON.parse(localStorage.getItem("ytplay.prev")),P={next:(s==null?void 0:s.length)?s:[],prev:(y==null?void 0:y.length)?s:[]};a({type:"init",payload:P})},[]),d.exports.useEffect(()=>{localStorage.setItem("ytplay.next",JSON.stringify(r.next)),localStorage.setItem("ytplay.prev",JSON.stringify(r.prev))});const w={audio:n,paused:c,state:r,loadAndPlay:p,toggleAudio:f,playNext:h,playPrev:x,playNow:N,addNext:S,add:A,remove:b};return e(m,{children:e(C.Provider,{value:w,children:t})})}function B(t,n){switch(n.type){case"play-next":return t.next[0]?{next:[...new Set(t.next.slice(1))],prev:[...new Set([t.next[0],...t.prev])]}:{next:[],prev:t.prev};case"play-prev":return t.prev[0]?{next:[...new Set([t.prev[0],...t.next])],prev:[...new Set(t.prev.slice(1))]}:{next:t.next,prev:[]};case"play-now":return t.next[0]?{next:[...new Set([n.payload,...t.next.slice(1)])],prev:[...new Set([t.next[0],...t.prev.filter(c=>c.id!==n.payload.id)])]}:{next:[n.payload],prev:t.prev};case"add-next":return t.next[0]?{next:[...new Set([t.next[0],n.payload,...t.next])],prev:t.prev}:{next:[n.payload],prev:t.prev};case"add":return{next:[...new Set([...t.next,n.payload])],prev:[...new Set(t.prev.filter(c=>c.id!==n.payload.id))]};case"remove":return{next:[...new Set(t.next.filter(c=>c.id!==n.payload.id))],prev:[...new Set(t.prev.filter(c=>c.id!==n.payload.id))]};case"init":return{next:[...new Set(n.payload.next)],prev:[...new Set(n.payload.prev)]}}}function G({song:t,paused:n,actions:c}){return e(m,{children:i("li",{className:"song",children:[e("img",{className:"img",src:t.img,alt:t.author}),i("div",{className:"info",children:[e("p",{children:e("span",{className:"title",children:t.title})}),e("p",{children:e("span",{className:"author",children:t.author})})]}),i("div",{className:"actions",children:[e("button",{onClick:()=>c[0](),children:n?e(v,{}):e(I,{})}),e("button",{onClick:()=>c[1](),children:e(M,{})}),e("button",{onClick:()=>c[2](t),children:e($,{})})]})]})})}function U({raw:t,actions:n}){const c={id:t.id.videoId,date:Date.now(),src:null,title:t.snippet.title.replace(/\&[\S]{0,9}\;/g,""),author:t.snippet.channelTitle.replace(/\&[\S]{0,9}\;/g,""),img:t.snippet.thumbnails.high.url};return e(m,{children:i("li",{className:"song",children:[e("img",{className:"img",src:c.img,alt:c.author}),i("div",{className:"info",children:[e("p",{children:e("span",{className:"title",children:c.title})}),e("p",{children:e("span",{className:"author",children:c.author})})]}),i("div",{className:"actions",children:[e("button",{onClick:()=>n[0](c),children:e(v,{})}),e("button",{onClick:()=>n[1](c),children:e(L,{})}),e("button",{onClick:()=>n[2](c),children:e(_,{})})]})]})})}function H({song:t,actions:n}){return e(m,{children:i("li",{className:"song",children:[e("img",{className:"img",src:t.img,alt:t.author}),i("div",{className:"info",children:[e("p",{children:e("span",{className:"title",children:t.title})}),e("p",{children:e("span",{className:"author",children:t.author})})]}),i("div",{className:"actions",children:[e("button",{onClick:()=>n[0](t),children:e(v,{})}),e("button",{onClick:()=>n[1](t),children:e(L,{})}),e("button",{onClick:()=>n[2](t),children:e($,{})})]})]})})}function K({song:t,actions:n}){return e(m,{children:i("li",{className:"song",children:[e("img",{className:"img",src:t.img,alt:t.author}),i("div",{className:"info",children:[e("p",{children:e("span",{className:"title",children:t.title})}),e("p",{children:e("span",{className:"author",children:t.author})})]}),i("div",{className:"actions",children:[e("button",{onClick:()=>n[0](t),children:e(v,{})}),e("button",{onClick:()=>n[1](t),children:e(_,{})}),e("button",{onClick:()=>n[2](t),children:e($,{})})]})]})})}function Q(){const{state:t,paused:n,loadAndPlay:c,toggleAudio:u,playNow:r,addNext:a,add:p,remove:f}=d.exports.useContext(C),[h,x]=d.exports.useState(!1),[N,S]=d.exports.useState([]),[A,b]=d.exports.useState(""),w=d.exports.useRef();function s(){S([]),b("")}function y(l){clearTimeout(w.current);const{value:o}=l.target;b(o),w.current=setTimeout(()=>P(o),800)}async function P(l){if(!(l.length<4))try{const o=new URL(k.google.base+k.google.string+l),g=(await T.get(o)).data.items;g.length&&S(g)}catch(o){console.error(o)}}async function R(l){try{const o=new URL(k.ytmp3.base+l.id),g=(await T.get(o,{headers:k.ytmp3.headers})).data.link;return g.length?(l.src=g,l):null}catch(o){return console.error(o),null}}async function q(l){const o=await R(l);o&&r(o),s()}async function j(l){const o=await R(l);o&&a(o),s()}async function z(l){const o=await R(l);o&&p(o),s()}return d.exports.useEffect(()=>{t.next[0]||x(!0)}),e(m,{children:i("section",{className:`search ${h?"expand":""}`,children:[i("div",{id:"yt-search",children:[e("button",{className:h?"expand":"",onClick:()=>x(!1)}),e("input",{className:h?"expand":"",type:"text",onFocus:()=>x(!0),onChange:y,value:A})]}),i("article",{className:`hidden ${h?"display":""}`,children:[i("ul",{className:`search-result ${N.length?"":"hide"}`,children:[e("h3",{children:"Wyniki"}),N.map(l=>e(U,{raw:l,actions:[q,j,z]},l.etag))]}),i("ul",{className:"playlist now",children:[e("h3",{children:"Teraz"}),t.next[0]?e(G,{song:t.next[0],paused:n,actions:[u,c,f]}):null]}),i("ul",{className:"playlist next",children:[e("h3",{children:"W kolejce"}),t.next.map((l,o)=>o?e(H,{song:l,actions:[r,a,f]},l.id):null)]}),i("ul",{className:"playlist prev",children:[e("h3",{children:"Wcze\u015Bniejsze"}),t.prev.map(l=>e(K,{song:l,actions:[r,p,f]},l.id))]})]})]})})}function X(){const{state:t}=d.exports.useContext(C);return e(m,{children:e("section",{className:"view",style:{backgroundImage:`url( ${t.next[0]?t.next[0].img:""} )`}})})}function Z(){const{audio:t,state:n,paused:c,loadAndPlay:u,toggleAudio:r,playNext:a,playPrev:p}=d.exports.useContext(C),f=d.exports.useRef();return d.exports.useEffect(()=>{function h(){document.querySelector("#input-timing .track").max=t.current.duration,document.querySelector("#input-timing .track").value=t.current.currentTime,document.querySelector("#input-timing .t-end").textContent=O(t.current.duration),document.querySelector("#input-timing .t-now").textContent=O(t.current.currentTime),f.current=requestAnimationFrame(h)}return h(),t.current.onended=()=>a(),()=>{cancelAnimationFrame(f.current)}},[]),e(m,{children:i("section",{className:"play",children:[i("div",{className:"row info",children:[e("p",{id:"animated-song-title",children:e("span",{className:"title",children:n.next[0]?n.next[0].title:""})}),e("p",{children:e("span",{className:"author",children:n.next[0]?n.next[0].author:""})})]}),i("div",{className:"row timing",id:"input-timing",children:[e("input",{className:"track",type:"range",min:0,max:0}),e("span",{className:"t-now",children:"0:00"}),e("span",{className:"t-end",children:"0:00"})]}),i("div",{className:"row actions",children:[e("button",{className:"skip-prev",onClick:u,onDoubleClick:p,children:e(F,{})}),e("button",{className:"play-pause",onClick:r,children:c?e(v,{}):e(I,{})}),e("button",{className:"skip-next",onClick:a,children:e(W,{})})]})]})})}function O(t){return Number.isNaN(t)?"0:00":`${Math.floor(t/60)}:${Math.ceil(t)%60>9?Math.ceil(t)%60:"0"+Math.ceil(t)%60}`}function ee(){return e(m,{children:i(V,{children:[e(Q,{}),e(X,{}),e(Z,{})]})})}Y.render(e(J.StrictMode,{children:e(ee,{})}),document.getElementById("root"));
